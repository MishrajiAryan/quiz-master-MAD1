{% extends "layout.html" %}

{% block title %}
    New Quiz
{% endblock %}

{% block content %}
<h1 class="display-3 text-center">Add New Quiz</h1>
<hr>
<div class="card shadow-lg p-4">
    <div class="card-body">
        <form action="" method="post" class="form">
    
            <div class="form-group">
                <label for="quiz_name" class="form-label">Name:</label>
                <input type="text" class="form-control border-black" style="max-width: 60%;" id="quiz_name" name="quiz_name" required>
            </div>
            <div class="form-group">
                <label for="date_of_quiz" class="form-label">Date of Quiz:</label>
                <input type="date" class="form-control border-black" style="max-width: 60%;" id="date_of_quiz" name="date_of_quiz" required>
            </div>
            <br>
            <div class="form-group d-flex align-items-center">
                <label for="hours" class="form-label me-2">Time Duration:</label>
            
                <input type="text" class="form-control text-center border-black" 
                       id="hours" name="hours" maxlength="2" 
                       style="width: 50px;" placeholder="HH" required 
                       pattern="^([0-1]?[0-9]|2[0-3])$" 
                       title="Enter hours (00-23)">
            
                <span class="mx-2">:</span>
            
                <input type="text" class="form-control text-center border-black" 
                       id="minutes" name="minutes" maxlength="2" 
                       style="width: 50px;" placeholder="MM" required 
                       pattern="^[0-5][0-9]$" 
                       title="Enter minutes (00-59)">
            </div>
            <input type="hidden" name="time_duration" id="time_duration">
            
            <div class="form-group">
                <label for="remarks" class="form-label">Remarks:</label>
                <input type="text" class="form-control border-black" id="remarks" name="remarks" required>
            </div>
            <br>
            <div class="btn-toolbar form-group" role="toolbar">
                <div class="btn-group form-group me-2" role="group">
                    <button type="submit" class="btn btn-success">
                        <i class="fa fa-plus" aria-hidden="true"></i>
                        Add Now
                    </button>
                </div>
                <div class="btn-group form-group me-2" role="group">
                    <a href="{{url_for('chapter.view_chapter', subject_id=chapter.subject_id, chapter_id=chapter.id)}}" class="btn btn-secondary">
                        <i class="fa fa-arrow-left"></i> 
                        Back to Chapter
                    </a>
                </div>
            </div>
        
        </form>
        <script>
            const dateInput = document.getElementById('date_of_quiz');
            const today = new Date().toISOString().split('T')[0];
            dateInput.setAttribute('min', today);
            
            document.querySelector("form").addEventListener("submit", function(event) {
                const hours = document.getElementById("hours").value.padStart(2, '0');
                const minutes = document.getElementById("minutes").value.padStart(2, '0');
        
                if (hours === "00" && minutes === "00") {
                    alert("Time Duration cannot be zero.");
                    event.preventDefault();
                    return;
                }
        
                document.getElementById("time_duration").value = hours + ":" + minutes;
            });
        </script>
    </div>
</div>
<br>

{% endblock %}
